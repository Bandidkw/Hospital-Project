import{d as h,u as P,y as k,K as N,r as V,z as x,c as j,a as T,b as e,j as f,w,e as o,f as d,v as b,a1 as m,n as p}from"./index-C1nZs7mf.mjs";const U={class:"min-h-screen bg-gradient-to-br from-teal-50 via-blue-50 to-green-50 p-6"},C={class:"max-w-5xl mx-auto"},S={class:"bg-white rounded-xl shadow-lg border border-gray-200 mb-6 overflow-hidden"},q={class:"p-8"},B={class:"relative"},D={class:"relative"},M={class:"relative"},$={class:"relative"},z={class:"relative"},F={class:"relative"},A={class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},E={class:"p-8"},K={class:"relative"},R={class:"relative"},G=["type"],H={class:"relative"},I={class:"relative"},J=["type"],L={class:"relative"},O={class:"relative"},Q=["type"],Y=h({__name:"DashboardProfileView",setup(W){const i=P(),g=k(),n=N(),l=V({username:n.user?.username||"",fullName:n.user?.fullName||"",role:n.user?.role||""}),t=x({currentPassword:"",newPassword:"",confirmNewPassword:""}),a=x({current:"password",new:"password",confirm:"password"}),c=u=>{a[u]=a[u]==="password"?"text":"password"},v=async()=>{if(!l.value.fullName.trim()){i.error("กรุณากรอกชื่อ-นามสกุล");return}await n.updateUserProfile({fullName:l.value.fullName})?i.success("บันทึกข้อมูลโปรไฟล์สำเร็จ!"):i.error("เกิดข้อผิดพลาดในการบันทึกข้อมูล")},y=async()=>{if(t.newPassword!==t.confirmNewPassword){i.error("รหัสผ่านใหม่และยืนยันรหัสผ่านใหม่ไม่ตรงกัน!");return}if(t.newPassword.length<5){i.error("รหัสผ่านใหม่ต้องมีความยาวอย่างน้อย 5 ตัวอักษร!");return}await n.changePassword({currentPassword:t.currentPassword,newPassword:t.newPassword,confirmNewPassword:t.confirmNewPassword})?(i.success("เปลี่ยนรหัสผ่านสำเร็จ!"),t.currentPassword="",t.newPassword="",t.confirmNewPassword="",await g.push({path:"/dashboard"})):i.error("เปลี่ยนรหัสผ่านไม่สำเร็จ! อาจเป็นเพราะรหัสผ่านปัจจุบันไม่ถูกต้อง")};return(u,s)=>(T(),j("div",U,[e("div",C,[s[25]||(s[25]=f('<div class="bg-white rounded-xl shadow-lg border-t-4 border-teal-600 mb-6 overflow-hidden"><div class="bg-gradient-to-r from-teal-600 to-blue-600 px-8 py-6"><div class="flex items-center justify-between"><div class="flex items-center gap-4"><div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg"><i class="fas fa-user-circle text-4xl text-teal-600"></i></div><div><h1 class="text-2xl font-bold text-white">โปรไฟล์ผู้ใช้งาน</h1><p class="text-teal-100 text-sm mt-1">จัดการข้อมูลส่วนตัวและความปลอดภัย</p></div></div><div class="hidden md:flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg"><i class="fas fa-shield-alt text-white"></i><span class="text-white text-sm font-medium">ระบบปลอดภัย</span></div></div></div></div>',1)),e("div",S,[s[18]||(s[18]=f('<div class="bg-gradient-to-r from-teal-50 to-blue-50 px-8 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-teal-600 rounded-lg flex items-center justify-center"><i class="fas fa-id-card text-white"></i></div><div><h2 class="text-xl font-bold text-gray-800">ข้อมูลส่วนตัว</h2><p class="text-sm text-gray-600">แก้ไขข้อมูลประจำตัวของคุณ</p></div></div></div>',1)),e("div",q,[e("form",{onSubmit:w(v,["prevent"]),class:"space-y-6"},[e("div",B,[s[10]||(s[10]=e("label",{for:"username",class:"block text-sm font-semibold text-gray-700 mb-2"},[e("i",{class:"fas fa-user text-teal-600 mr-2"}),o("ชื่อผู้ใช้งาน ")],-1)),e("div",D,[d(e("input",{type:"text",id:"username","onUpdate:modelValue":s[0]||(s[0]=r=>l.value.username=r),class:"block w-full border-2 border-gray-300 rounded-lg shadow-sm p-3 pl-10 bg-gray-100 cursor-not-allowed text-gray-600 font-medium",disabled:""},null,512),[[b,l.value.username]]),s[9]||(s[9]=e("i",{class:"fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"},null,-1))]),s[11]||(s[11]=e("div",{class:"flex items-center gap-2 mt-2"},[e("span",{class:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full"},[e("i",{class:"fas fa-info-circle"}),o(" ไม่สามารถแก้ไขได้ ")])],-1))]),e("div",M,[s[13]||(s[13]=e("label",{for:"fullName",class:"block text-sm font-semibold text-gray-700 mb-2"},[e("i",{class:"fas fa-id-badge text-teal-600 mr-2"}),o("ชื่อ-นามสกุล "),e("span",{class:"text-red-500"},"*")],-1)),e("div",$,[d(e("input",{type:"text",id:"fullName","onUpdate:modelValue":s[1]||(s[1]=r=>l.value.fullName=r),class:"block w-full border-2 border-gray-300 rounded-lg shadow-sm p-3 pl-10 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",required:""},null,512),[[b,l.value.fullName]]),s[12]||(s[12]=e("i",{class:"fas fa-edit absolute left-3 top-1/2 -translate-y-1/2 text-teal-500 text-sm"},null,-1))])]),e("div",z,[s[15]||(s[15]=e("label",{for:"role",class:"block text-sm font-semibold text-gray-700 mb-2"},[e("i",{class:"fas fa-user-tag text-teal-600 mr-2"}),o("บทบาท ")],-1)),e("div",F,[d(e("input",{type:"text",id:"role","onUpdate:modelValue":s[2]||(s[2]=r=>l.value.role=r),class:"block w-full border-2 border-gray-300 rounded-lg shadow-sm p-3 pl-10 bg-gray-100 cursor-not-allowed text-gray-600 font-medium",disabled:""},null,512),[[b,l.value.role]]),s[14]||(s[14]=e("i",{class:"fas fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"},null,-1))]),s[16]||(s[16]=e("div",{class:"flex items-center gap-2 mt-2"},[e("span",{class:"inline-flex items-center gap-1 text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full"},[e("i",{class:"fas fa-info-circle"}),o(" ไม่สามารถแก้ไขได้ ")])],-1))]),s[17]||(s[17]=e("div",{class:"flex justify-end pt-4 border-t border-gray-200"},[e("button",{type:"submit",class:"bg-gradient-to-r from-teal-600 to-blue-600 text-white px-8 py-3 rounded-lg hover:from-teal-700 hover:to-blue-700 transition-all duration-300 shadow-lg hover:shadow-xl font-medium flex items-center gap-2"},[e("i",{class:"fas fa-save"}),e("span",null,"บันทึกข้อมูลโปรไฟล์")])],-1))],32)])]),e("div",A,[s[24]||(s[24]=f('<div class="bg-gradient-to-r from-blue-50 to-teal-50 px-8 py-4 border-b border-gray-200"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center"><i class="fas fa-key text-white"></i></div><div><h2 class="text-xl font-bold text-gray-800">เปลี่ยนรหัสผ่าน</h2><p class="text-sm text-gray-600">อัปเดตรหัสผ่านเพื่อความปลอดภัย</p></div></div></div>',1)),e("div",E,[s[23]||(s[23]=f('<div class="bg-amber-50 border-l-4 border-amber-500 p-4 mb-6 rounded-r-lg flex items-start gap-3"><i class="fas fa-exclamation-triangle text-amber-600 mt-0.5"></i><div class="text-sm text-amber-800"><p class="font-semibold mb-1">คำแนะนำด้านความปลอดภัย:</p><ul class="list-disc list-inside space-y-1 text-xs"><li>รหัสผ่านควรมีความยาวอย่างน้อย 5 ตัวอักษร</li><li>ใช้ตัวอักษรพิมพ์เล็ก พิมพ์ใหญ่ ตัวเลข และอักขระพิเศษ</li><li>ไม่ควรใช้รหัสผ่านเดียวกันกับบัญชีอื่น</li></ul></div></div>',1)),e("form",{onSubmit:w(y,["prevent"]),class:"space-y-6"},[e("div",K,[s[19]||(s[19]=e("label",{for:"currentPassword",class:"block text-sm font-semibold text-gray-700 mb-2"},[e("i",{class:"fas fa-lock text-blue-600 mr-2"}),o("รหัสผ่านปัจจุบัน "),e("span",{class:"text-red-500"},"*")],-1)),e("div",R,[d(e("input",{type:a.current,id:"currentPassword","onUpdate:modelValue":s[3]||(s[3]=r=>t.currentPassword=r),class:"block w-full border-2 border-gray-300 rounded-lg shadow-sm p-3 pr-12 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",required:"",autocomplete:"current-password"},null,8,G),[[m,t.currentPassword]]),e("button",{type:"button",onClick:s[4]||(s[4]=r=>c("current")),class:"absolute inset-y-0 right-0 px-4 flex items-center text-gray-500 hover:text-blue-600 transition-colors","aria-label":"Toggle current password visibility"},[e("i",{class:p(["fas",a.current==="password"?"fa-eye":"fa-eye-slash"])},null,2)])])]),e("div",H,[s[20]||(s[20]=e("label",{for:"newPassword",class:"block text-sm font-semibold text-gray-700 mb-2"},[e("i",{class:"fas fa-key text-blue-600 mr-2"}),o("รหัสผ่านใหม่ "),e("span",{class:"text-red-500"},"*")],-1)),e("div",I,[d(e("input",{type:a.new,id:"newPassword","onUpdate:modelValue":s[5]||(s[5]=r=>t.newPassword=r),class:"block w-full border-2 border-gray-300 rounded-lg shadow-sm p-3 pr-12 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",required:"",autocomplete:"new-password"},null,8,J),[[m,t.newPassword]]),e("button",{type:"button",onClick:s[6]||(s[6]=r=>c("new")),class:"absolute inset-y-0 right-0 px-4 flex items-center text-gray-500 hover:text-blue-600 transition-colors","aria-label":"Toggle new password visibility"},[e("i",{class:p(["fas",a.new==="password"?"fa-eye":"fa-eye-slash"])},null,2)])])]),e("div",L,[s[21]||(s[21]=e("label",{for:"confirmNewPassword",class:"block text-sm font-semibold text-gray-700 mb-2"},[e("i",{class:"fas fa-check-circle text-blue-600 mr-2"}),o("ยืนยันรหัสผ่านใหม่ "),e("span",{class:"text-red-500"},"*")],-1)),e("div",O,[d(e("input",{type:a.confirm,id:"confirmNewPassword","onUpdate:modelValue":s[7]||(s[7]=r=>t.confirmNewPassword=r),class:"block w-full border-2 border-gray-300 rounded-lg shadow-sm p-3 pr-12 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",required:"",autocomplete:"new-password"},null,8,Q),[[m,t.confirmNewPassword]]),e("button",{type:"button",onClick:s[8]||(s[8]=r=>c("confirm")),class:"absolute inset-y-0 right-0 px-4 flex items-center text-gray-500 hover:text-blue-600 transition-colors","aria-label":"Toggle confirm new password visibility"},[e("i",{class:p(["fas",a.confirm==="password"?"fa-eye":"fa-eye-slash"])},null,2)])])]),s[22]||(s[22]=e("div",{class:"flex justify-end pt-4 border-t border-gray-200"},[e("button",{type:"submit",class:"bg-gradient-to-r from-blue-600 to-teal-600 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-teal-700 transition-all duration-300 shadow-lg hover:shadow-xl font-medium flex items-center gap-2"},[e("i",{class:"fas fa-key"}),e("span",null,"เปลี่ยนรหัสผ่าน")])],-1))],32)])]),s[26]||(s[26]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-sm text-gray-600 flex items-center justify-center gap-2"},[e("i",{class:"fas fa-info-circle text-teal-600"}),e("span",null,"หากพบปัญหาในการใช้งาน กรุณาติดต่อผู้ดูแลระบบ")])],-1))])]))}});export{Y as default};
