import{d as M,B as T,y as V,r as u,l as $,o as E,c as l,a as n,b as t,k as d,j as b,t as o,e as F,F as y,h as w,I as H,H as P,_ as R}from"./index-C1nZs7mf.mjs";const S={class:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50"},z={key:0,class:"max-w-4xl mx-auto px-4 py-8"},A={key:1,class:"max-w-4xl mx-auto px-4 py-16"},W={class:"bg-white rounded-2xl shadow-lg p-8 text-center"},K={class:"text-gray-600 mb-6"},q={key:2,class:"max-w-4xl mx-auto px-4 py-8"},G={class:"bg-white rounded-2xl shadow-xl overflow-hidden"},J={class:"relative"},O={class:"aspect-video md:aspect-[21/9] overflow-hidden bg-gray-100"},Q=["src","alt"],X={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200"},Y={key:0,class:"absolute top-4 left-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg"},Z={class:"p-6 md:p-8 lg:p-10"},tt={class:"mb-8"},et={class:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 leading-tight mb-4"},at={class:"flex flex-wrap items-center gap-4 text-sm text-gray-600"},st={class:"flex items-center gap-2"},lt={class:"flex items-center gap-2"},nt={class:"flex items-center gap-2"},rt={class:"prose prose-lg max-w-none"},ot=["innerHTML"],it={key:1,class:"text-gray-500 italic text-center py-8"},dt={key:0,class:"mt-10 p-6 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl border border-red-100"},ct={class:"flex items-center gap-4"},ut=["href"],gt={key:1,class:"mt-8"},ft={class:"flex flex-wrap gap-2"},vt={key:0,class:"mt-12"},mt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},xt={class:"aspect-video overflow-hidden bg-gray-100"},pt=["src","alt"],ht={class:"p-4"},bt={class:"font-semibold text-gray-900 mb-2 line-clamp-2"},yt={class:"text-sm text-gray-600"},wt=M({__name:"NewsImageDetailView",setup(_t){const _=T(),k=V(),s=u(null),c=u(!0),i=u(null),f=u([]),v=$(()=>_.params.id);function U(a){return a?/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(a.toLowerCase()):!1}function C(a){return a?a.toLowerCase().endsWith(".pdf"):!1}function g(a){return a?a.startsWith("http")?a:`${"https://api.maetaeng.go.th/api/v1".replace(/\/api.*$/,"").replace(/\/$/,"")}/${a.replace(/^\//,"")}`:""}function m(a){try{return new Date(a).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}catch{return a}}function N(a){return a?a.split(`

`).map(e=>`<p class="mb-4">${e.replace(/\n/g,"<br>")}</p>`).join(""):""}function j(a){if(!a)return 1;const e=200,r=a.split(/\s+/).length;return Math.max(1,Math.ceil(r/e))}function I(a){return a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString()}function B(a){const e=a.target;e.src="data:image/svg+xml;base64,"+btoa(`
    <svg xmlns="http://www.w3.org/2000/svg" width="800" height="400" viewBox="0 0 800 400">
      <rect width="100%" height="100%" fill="#f3f4f6"/>
      <text x="50%" y="50%" text-anchor="middle" dy=".3em" font-family="Arial, sans-serif" font-size="18" fill="#6b7280">
        ไม่สามารถโหลดรูปภาพได้
      </text>
    </svg>
  `)}function D(a){a.target.classList.add("loaded")}function L(){k.push({name:"public-news"})}async function x(){if(!s.value)return;const a={title:s.value.title,text:`อ่านข่าว: ${s.value.title}`,url:window.location.href};try{navigator.share?await navigator.share(a):(await navigator.clipboard.writeText(window.location.href),alert("คัดลอกลิงก์แล้ว!"))}catch(e){console.error("Error sharing:",e)}}function p(){window.print()}async function h(){if(!v.value){i.value="ไม่พบรหัสข่าวสาร",c.value=!1;return}c.value=!0,i.value=null;try{const a=await H(v.value);!a||!a.title?i.value="ไม่พบข่าวสารที่ระบุ":s.value=a}catch(a){console.error("Error fetching news:",a),i.value=P(a)?a.response?.data?.message||a.message:"ไม่สามารถโหลดข่าวสารได้"}finally{c.value=!1}}return E(()=>{window.scrollTo({top:0,behavior:"smooth"}),h()}),(a,e)=>(n(),l("div",S,[t("nav",{class:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-40"},[t("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[t("div",{class:"flex items-center justify-between h-16"},[t("button",{onClick:L,class:"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors duration-200 font-medium"},e[0]||(e[0]=[t("i",{class:"fas fa-arrow-left text-sm"},null,-1),t("span",{class:"hidden sm:inline"},"กลับสู่หน้าข่าวสารทั้งหมด",-1),t("span",{class:"sm:hidden"},"กลับ",-1)])),t("div",{class:"flex items-center gap-4"},[t("button",{onClick:x,class:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-full transition-all duration-200",title:"แชร์ข่าวนี้"},e[1]||(e[1]=[t("i",{class:"fas fa-share-alt"},null,-1)])),t("button",{onClick:p,class:"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-full transition-all duration-200",title:"พิมพ์ข่าว"},e[2]||(e[2]=[t("i",{class:"fas fa-print"},null,-1)]))])])])]),c.value?(n(),l("div",z,e[3]||(e[3]=[b('<div class="bg-white rounded-2xl shadow-lg overflow-hidden" data-v-8ad1aa78><div class="animate-pulse" data-v-8ad1aa78><div class="h-64 md:h-96 bg-gray-200" data-v-8ad1aa78></div><div class="p-6 md:p-8" data-v-8ad1aa78><div class="h-8 bg-gray-200 rounded-lg w-3/4 mb-4" data-v-8ad1aa78></div><div class="h-4 bg-gray-200 rounded w-1/3 mb-6" data-v-8ad1aa78></div><div class="space-y-3" data-v-8ad1aa78><div class="h-4 bg-gray-200 rounded" data-v-8ad1aa78></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-8ad1aa78></div><div class="h-4 bg-gray-200 rounded w-4/5" data-v-8ad1aa78></div></div></div></div></div>',1)]))):i.value?(n(),l("div",A,[t("div",W,[e[5]||(e[5]=t("div",{class:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4"},[t("i",{class:"fas fa-exclamation-triangle text-red-500 text-2xl"})],-1)),e[6]||(e[6]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"เกิดข้อผิดพลาด",-1)),t("p",K,o(i.value),1),t("button",{onClick:h,class:"inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors duration-200 font-medium"},e[4]||(e[4]=[t("i",{class:"fas fa-redo text-sm"},null,-1),F(" ลองใหม่อีกครั้ง ")]))])])):s.value?(n(),l("main",q,[t("article",G,[t("div",J,[t("div",O,[s.value.imageUrl&&U(s.value.imageUrl)?(n(),l("img",{key:0,src:g(s.value.imageUrl),alt:s.value.title,class:"w-full h-full object-cover transition-transform duration-700 hover:scale-105",onError:B,onLoad:D},null,40,Q)):(n(),l("div",X,e[7]||(e[7]=[t("div",{class:"text-center text-gray-500"},[t("i",{class:"fas fa-image text-4xl mb-2"}),t("p",{class:"text-sm"},"ไม่มีรูปภาพ")],-1)])))]),e[8]||(e[8]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/20 via-transparent to-transparent"},null,-1)),s.value.category?(n(),l("div",Y,o(s.value.category),1)):d("",!0)]),t("div",Z,[t("header",tt,[t("h1",et,o(s.value.title),1),t("div",at,[t("div",st,[e[9]||(e[9]=t("i",{class:"far fa-calendar-alt text-blue-500"},null,-1)),t("span",null,o(m(s.value.date)),1)]),t("div",lt,[e[10]||(e[10]=t("i",{class:"far fa-clock text-green-500"},null,-1)),t("span",null,o(j(s.value.content))+" นาที",1)]),t("div",nt,[e[11]||(e[11]=t("i",{class:"far fa-eye text-purple-500"},null,-1)),t("span",null,o(I(s.value.views||0))+" ครั้ง",1)])])]),t("div",rt,[s.value.content?(n(),l("div",{key:0,class:"text-gray-800 leading-relaxed space-y-4",innerHTML:N(s.value.content)},null,8,ot)):(n(),l("div",it,"ไม่มีเนื้อหารายละเอียด"))]),s.value.pdfUrl||s.value.imageUrl&&C(s.value.imageUrl)?(n(),l("div",dt,[t("div",ct,[e[13]||(e[13]=b('<div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center" data-v-8ad1aa78><i class="fas fa-file-pdf text-red-600 text-xl" data-v-8ad1aa78></i></div><div class="flex-1" data-v-8ad1aa78><h3 class="font-semibold text-gray-900 mb-1" data-v-8ad1aa78>เอกสารแนบ</h3><p class="text-sm text-gray-600" data-v-8ad1aa78>ดาวน์โหลดเอกสาร PDF เพื่อดูรายละเอียดเพิ่มเติม</p></div>',2)),t("a",{href:s.value.pdfUrl||g(s.value.imageUrl),target:"_blank",class:"inline-flex items-center gap-2 bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl"},e[12]||(e[12]=[t("i",{class:"fas fa-download"},null,-1),t("span",{class:"hidden sm:inline"},"ดาวน์โหลด",-1)]),8,ut)])])):d("",!0),s.value.tags&&s.value.tags.length>0?(n(),l("div",gt,[e[14]||(e[14]=t("h3",{class:"text-sm font-semibold text-gray-700 mb-3"},"แท็ก:",-1)),t("div",ft,[(n(!0),l(y,null,w(s.value.tags,r=>(n(),l("span",{key:r,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors duration-200"}," #"+o(r),1))),128))])])):d("",!0)]),t("footer",{class:"px-6 md:px-8 lg:px-10 py-6 bg-gray-50 border-t border-gray-100"},[t("div",{class:"flex items-center justify-center gap-6"},[t("button",{onClick:x,class:"inline-flex items-center gap-2 text-gray-600 hover:text-blue-600 transition-colors duration-200"},e[15]||(e[15]=[t("i",{class:"fas fa-share-alt"},null,-1),t("span",null,"แชร์",-1)])),t("button",{onClick:p,class:"inline-flex items-center gap-2 text-gray-600 hover:text-green-600 transition-colors duration-200"},e[16]||(e[16]=[t("i",{class:"fas fa-print"},null,-1),t("span",null,"พิมพ์",-1)]))])])]),f.value.length>0?(n(),l("section",vt,[e[17]||(e[17]=t("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"ข่าวที่เกี่ยวข้อง",-1)),t("div",mt,[(n(!0),l(y,null,w(f.value,r=>(n(),l("article",{key:r.id,class:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300"},[t("div",xt,[r.imageUrl?(n(),l("img",{key:0,src:g(r.imageUrl),alt:r.title,class:"w-full h-full object-cover hover:scale-105 transition-transform duration-300"},null,8,pt)):d("",!0)]),t("div",ht,[t("h3",bt,o(r.title),1),t("p",yt,o(m(r.date)),1)])]))),128))])])):d("",!0)])):d("",!0)]))}}),Ut=R(wt,[["__scopeId","data-v-8ad1aa78"]]);export{Ut as default};
