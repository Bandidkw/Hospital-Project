import{d as tt,r as D,o as et,s as X,l as K,c as n,a,b as t,k as w,t as d,F as k,h as C,n as V,f as _,g as $,j as st,_ as lt,x as ot,y as nt,u as at,z as it,w as Z,e as y,v as L,m as rt,A as dt}from"./index-C1nZs7mf.mjs";const ut={class:"p-4 bg-white rounded-lg shadow-lg border w-full font-sans max-w-4xl mx-auto"},ct={class:"flex items-center justify-between px-2 mb-4"},pt={class:"font-bold text-gray-800 text-xl"},mt={class:"flex items-center space-x-2"},ft=["disabled"],gt=["disabled"],bt={key:0,class:"fas fa-spinner fa-spin text-sm"},vt={key:1,class:"fas fa-chevron-right text-sm"},xt={class:"grid grid-cols-7 border-t border-l border-gray-200"},yt=["onClick"],ht={key:0,class:"text-center mt-1 w-full"},wt={key:0,class:"mt-6 pt-4 border-t border-gray-200 flex items-center justify-center space-x-4 text-gray-700 bg-white p-6 rounded-xl shadow-lg border border-blue-100"},kt={class:"flex items-center space-x-2"},Ct=["value"],Q=15,St=tt({__name:"CustomCalendar",props:{modelValue:{}},emits:["update:modelValue"],setup(f,{emit:v}){const g=f,S=v,p=["จ","อ","พ","พฤ","ศ","ส","อา"],I=u=>{if(!u)return 0;const r=u.getMinutes();return Math.floor(r/10)*10},m=D(g.modelValue||new Date),b=D(g.modelValue),F=D(g.modelValue?g.modelValue.getHours():9),s=D(I(g.modelValue)),j=D({}),T=D(!1);async function B(u,r){return console.log(`Fetching availability for ${u}-${r+1}...`),await new Promise(o=>setTimeout(o,500)),u===2025&&r===9?{"2025-10-27":8,"2025-10-28":14}:{}}async function P(){T.value=!0;try{j.value=await B(m.value.getFullYear(),m.value.getMonth())}catch(u){console.error("Failed to fetch availability:",u)}finally{T.value=!1}}et(()=>{P()}),X(m,()=>{P()}),X([b,F,s],()=>{if(b.value){const u=new Date(b.value);u.setHours(F.value,s.value,0,0),S("update:modelValue",u)}else S("update:modelValue",null)});const W=K(()=>m.value.toLocaleString("th-TH",{month:"long"})),A=K(()=>m.value.toLocaleString("th-TH",{year:"numeric"})),O=K(()=>{const u=m.value.getFullYear(),r=m.value.getMonth(),N=(new Date(u,r,1).getDay()+6)%7,h=[];for(let i=N;i>0;i--){const e=new Date(u,r,1-i);h.push({date:e,isCurrentMonth:!1,isToday:!1,isSelected:!1,slotsRemaining:0,isFull:!0,isPast:!1,isWeekend:!1})}const G=new Date(u,r+1,0).getDate(),U=new Date;U.setHours(0,0,0,0);for(let i=1;i<=G;i++){const e=new Date(u,r,i),l=e.getDay(),c=e.toISOString().slice(0,10),x=j.value[c]||0,H=x>=Q,M=e<U,J=l===0||l===6;h.push({date:e,isCurrentMonth:!0,isToday:e.toDateString()===new Date().toDateString(),isSelected:b.value?e.toDateString()===b.value.toDateString():!1,slotsRemaining:J?0:Q-x,isFull:J||H,isPast:M,isWeekend:J})}const q=42-h.length;for(let i=1;i<=q;i++){const e=new Date(u,r+1,i);h.push({date:e,isCurrentMonth:!1,isToday:!1,isSelected:!1,slotsRemaining:0,isFull:!0,isPast:!1,isWeekend:!1})}return h});function z(){m.value=new Date,b.value=null,P()}function E(){m.value=new Date(m.value.getFullYear(),m.value.getMonth()-1,1),b.value&&b.value.getMonth()!==m.value.getMonth()&&(b.value=null)}function Y(){m.value=new Date(m.value.getFullYear(),m.value.getMonth()+1,1),b.value&&b.value.getMonth()!==m.value.getMonth()&&(b.value=null)}function R(u){if(!u.isCurrentMonth||u.isFull||u.isPast||u.isWeekend){u.isSelected&&(b.value=null);return}u.isSelected?b.value=null:b.value=u.date}return(u,r)=>(a(),n("div",ut,[t("div",ct,[t("h2",pt,d(W.value)+" "+d(A.value),1),t("div",mt,[t("button",{onClick:z,type:"button",class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors duration-150"}," Today "),t("button",{onClick:E,type:"button",disabled:T.value,class:"p-2 rounded-full text-gray-500 hover:bg-gray-200 disabled:opacity-50"},r[2]||(r[2]=[t("i",{class:"fas fa-chevron-left text-sm"},null,-1)]),8,ft),t("button",{onClick:Y,type:"button",disabled:T.value,class:"p-2 rounded-full text-gray-500 hover:bg-gray-200 disabled:opacity-50"},[T.value?(a(),n("i",bt)):(a(),n("i",vt))],8,gt)])]),t("div",xt,[(a(),n(k,null,C(p,(o,N)=>t("div",{key:o,class:V(["text-xs font-semibold py-2 px-2 text-left border-b border-r border-gray-200",{"text-red-600":N>=5,"text-gray-700":N<5}])},d(o),3)),64)),(a(!0),n(k,null,C(O.value,o=>(a(),n("div",{key:o.date.toISOString(),onClick:N=>R(o),class:V(["h-28 border-b border-r border-gray-200 transition-colors duration-100 flex flex-col p-1.5 relative",{"bg-gray-50":!o.isCurrentMonth,"bg-red-50":o.isCurrentMonth&&o.isWeekend&&!o.isPast,"opacity-70 cursor-not-allowed":o.isCurrentMonth&&(o.isFull||o.isPast||o.isWeekend),"cursor-pointer hover:bg-blue-50":o.isCurrentMonth&&!o.isFull&&!o.isPast&&!o.isWeekend,"bg-blue-100 border-blue-500 border-2":o.isSelected,"bg-yellow-50":o.isToday&&!o.isSelected}])},[t("span",{class:V(["text-xs font-medium self-end w-6 h-6 rounded-full flex items-center justify-center z-10",{"text-blue-600 font-bold":o.isToday&&!o.isSelected,"text-white bg-blue-600 font-bold":o.isSelected,"text-gray-500":!o.isToday&&!o.isSelected,"text-gray-400":!o.isCurrentMonth}])},d(o.date.getDate()),3),o.isCurrentMonth&&!o.isWeekend&&!o.isPast?(a(),n("div",ht,[t("span",{class:V(["text-xs font-semibold px-2 py-0.5 rounded-full",{"bg-green-100 text-green-700":o.slotsRemaining>7,"bg-amber-100 text-amber-700":o.slotsRemaining<=7&&o.slotsRemaining>0,"bg-red-100 text-red-700":o.slotsRemaining===0||o.isFull,"bg-white/50":o.isSelected}])},d(o.slotsRemaining)+"/"+d(Q),3)])):w("",!0)],10,yt))),128))]),b.value?(a(),n("div",wt,[r[5]||(r[5]=t("i",{class:"far fa-clock text-2xl text-blue-600"},null,-1)),r[6]||(r[6]=t("span",{class:"font-bold text-blue-700 text-lg"},"กำหนดเวลา:",-1)),t("div",kt,[_(t("select",{"onUpdate:modelValue":r[0]||(r[0]=o=>F.value=o),class:"px-4 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 text-base bg-white font-mono shadow-sm hover:border-blue-500 transition-colors"},[(a(),n(k,null,C(8,o=>t("option",{key:o,value:o+8},d((o+8).toString().padStart(2,"0")),9,Ct)),64))],512),[[$,F.value,void 0,{number:!0}]]),r[4]||(r[4]=t("span",{class:"text-2xl font-light text-gray-500"},":",-1)),_(t("select",{"onUpdate:modelValue":r[1]||(r[1]=o=>s.value=o),class:"px-4 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 text-base bg-white font-mono shadow-sm hover:border-blue-500 transition-colors"},r[3]||(r[3]=[st('<option value="0" data-v-b6731da4>00</option><option value="10" data-v-b6731da4>10</option><option value="20" data-v-b6731da4>20</option><option value="30" data-v-b6731da4>30</option><option value="40" data-v-b6731da4>40</option><option value="50" data-v-b6731da4>50</option>',6)]),512),[[$,s.value,void 0,{number:!0}]])])])):w("",!0)]))}}),Dt=lt(St,[["__scopeId","data-v-b6731da4"]]),_t="/patient/public";async function It(){return await new Promise(f=>setTimeout(f,500)),[{id:"h01",name:"โรงพยาบาลแม่แตง"},{id:"h02",name:"โรงพยาบาลนครพิงค์"},{id:"h03",name:"โรงพยาบาลมหาราชนครเชียงใหม่"}]}async function Ft(f){return await new Promise(g=>setTimeout(g,300)),{h01:[{id:"h01c01",name:"คลินิกอายุรกรรม"},{id:"h01c02",name:"คลินิกศัลยกรรม"}],h02:[{id:"h02c01",name:"แผนกโรคหัวใจ"},{id:"h02c02",name:"แผนกจักษุวิทยา"}],h03:[{id:"h03c01",name:"ศูนย์ความเป็นเลิศทางการแพทย์"}]}[f]||[]}async function Nt(f){const v=new FormData;let g="",S="";if(f.travelDate){const I=f.travelDate;g=I.toISOString().split("T")[0],S=`${I.getHours().toString().padStart(2,"0")}:${I.getMinutes().toString().padStart(2,"0")}`}return v.append("fullName",f.patientName),v.append("nationalId",f.patientIdCard),v.append("phoneNumber",f.patientTel),v.append("medicalRights",f.healthScheme),v.append("referralHospital",f.originHospitalId),v.append("hospitalNumber",f.patientHN),v.append("queueStatus","PENDING"),v.append("bookingDate",g),v.append("bookingTime",S),v.append("queueStatus","PENDING"),v.append("destinations",JSON.stringify(f.destinations)),f.referralFiles&&f.referralFiles.length>0&&f.referralFiles.forEach(I=>{v.append("documents",I)}),(await ot.post(_t,v)).data.data}const Ht={class:"bg-gray-50 min-h-screen"},Mt={class:"max-w-4xl mx-auto px-4 py-10"},Tt={class:"mb-8 flex justify-between items-center border-b pb-4"},Vt={key:0,class:"fas fa-check"},$t={key:1},Pt={class:"bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-100"},jt={key:0,class:"space-y-6 animate-fade-in"},Rt={class:"border border-gray-200 rounded-lg p-5 bg-gray-50/50 space-y-4"},Ut={class:"grid sm:grid-cols-2 gap-4"},Lt={class:"mt-1 relative rounded-md shadow-sm"},Bt={class:"mt-1 relative rounded-md shadow-sm"},Wt={class:"grid sm:grid-cols-2 gap-4"},At={class:"mt-1 relative rounded-md shadow-sm"},Ot={class:"mt-1 relative rounded-md shadow-sm"},zt={class:"border border-gray-200 rounded-lg p-5 bg-gray-50/50 space-y-4"},Et={class:"grid sm:grid-cols-2 gap-4"},Yt=["value"],Gt={class:"text-center"},qt={class:"flex text-sm text-gray-600 justify-center"},Jt={class:"relative cursor-pointer rounded-md font-semibold text-teal-600 focus-within:outline-none hover:text-teal-500"},Kt={key:0,class:"mt-4 grid gap-2"},Qt={class:"flex items-center overflow-hidden"},Xt={class:"text-gray-700 truncate"},Zt=["onClick"],te={key:1,class:"space-y-6 animate-fade-in"},ee={class:"flex justify-between items-center p-4 bg-gray-50 border-b border-gray-200 rounded-t-lg"},se={class:"font-semibold text-lg text-gray-800 flex items-center gap-2"},le={class:"bg-teal-100 text-teal-800 text-xs font-bold px-2 py-1 rounded"},oe=["onClick"],ne={class:"p-5 space-y-5"},ae=["onUpdate:modelValue","onChange"],ie=["value"],re={key:0,class:"text-sm text-gray-500 bg-gray-100 p-3 rounded-md"},de={key:1,class:"space-y-3"},ue=["onUpdate:modelValue"],ce=["value"],pe=["onClick"],me=["onClick"],fe={key:2,class:"space-y-6 animate-fade-in"},ge={class:"flex justify-center py-6"},be={key:3,class:"animate-fade-in"},ve={key:0,class:"text-center py-10"},xe={class:"bg-white border-2 border-teal-100 rounded-xl p-6 max-w-md mx-auto shadow-sm mb-8"},ye={class:"text-3xl font-mono font-bold text-teal-700 tracking-wider select-all"},he={key:1},we={class:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm mb-6"},ke={class:"p-6 border-b border-gray-100"},Ce={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-4 text-sm"},Se={class:"font-medium text-gray-900"},De={class:"font-medium text-gray-900"},_e={class:"font-medium text-gray-900"},Ie={class:"font-medium text-gray-900"},Fe={class:"font-medium text-gray-900"},Ne={class:"font-medium text-gray-900"},He={class:"mt-4 pt-4 border-t border-gray-50"},Me={class:"text-gray-500 text-sm mb-2"},Te={key:0,class:"list-disc list-inside text-sm text-gray-700 space-y-1"},Ve={key:1,class:"text-sm text-gray-400 italic"},$e={class:"p-6 border-b border-gray-100 bg-gray-50/30"},Pe={class:"font-semibold text-gray-900 mb-1"},je={class:"ml-6 list-disc text-sm text-gray-600"},Re={class:"p-6"},Ue={class:"text-gray-900 font-medium"},Le={key:4,class:"mt-8 flex justify-between pt-6 border-t border-gray-100"},Be={key:1},We=["disabled"],Ae={key:0,class:"fas fa-spinner fa-spin mr-2"},Oe=tt({__name:"PatientReferralView",setup(f){const v=nt(),g=at(),S=D(!1),p=D(1),I=["ข้อมูลผู้ป่วย","เลือกปลายทาง","เลือกวันเวลา","ยืนยันข้อมูล"],m=D(null),b=D(null),F=D([]),s=it({patientName:"",patientHN:"",patientIdCard:"",patientTel:"",patientBirthdate:"",healthScheme:"",originHospitalId:"",referralFiles:[],destinations:[{hospitalId:"",clinics:[{clinicId:""}],availableClinics:[]}],travelDate:new Date}),j=async()=>{try{F.value=await It()}catch(i){console.error("Failed to fetch hospitals:",i),g.error("ไม่สามารถดึงรายชื่อโรงพยาบาลได้")}},T=async i=>{if(!i)return[];try{return await Ft(i)}catch(e){return console.error(`Failed to fetch clinics for ${i}:`,e),g.error("ไม่สามารถดึงข้อมูลคลินิกได้"),[]}};et(()=>{j()});const B=async i=>{const e=s.destinations[i];e.clinics=[{clinicId:""}],e.availableClinics=[],e.hospitalId&&(e.availableClinics=await T(e.hospitalId))},P=()=>{b.value?.click()},W=i=>{const e=i.target,l=e.files;if(!l)return;const c=[...s.referralFiles,...Array.from(l)];if(c.length>5){g.error("อัปโหลดได้สูงสุด 5 ไฟล์"),e.value="";return}if(Array.from(l).some(H=>H.size>10*1024*1024)){g.error("บางไฟล์มีขนาดเกิน 10MB"),e.value="";return}s.referralFiles=c,e.value=""},A=i=>{s.referralFiles.splice(i,1)},O=()=>{s.destinations.push({hospitalId:"",clinics:[{clinicId:""}],availableClinics:[]})},z=i=>{s.destinations.length>1&&s.destinations.splice(i,1)},E=i=>{s.destinations[i].clinics.push({clinicId:""})},Y=(i,e)=>{s.destinations[i].clinics.length>1&&s.destinations[i].clinics.splice(e,1)},R=i=>F.value.find(e=>e.id===i)?.name||i,u=(i,e)=>{const l=s.destinations.find(c=>c.hospitalId===i);return l&&l.availableClinics.find(c=>c.id===e)?.name||e},r=()=>s.patientName.trim()?s.patientHN.trim()?!s.patientIdCard.trim()||s.patientIdCard.length!==13?h("กรุณากรอกเลขบัตรประชาชน 13 หลัก"):s.patientTel.trim()?s.originHospitalId?s.healthScheme?!0:h("กรุณาเลือกสิทธิการรักษา"):h("กรุณาเลือกโรงพยาบาลต้นทาง"):h("กรุณากรอกเบอร์โทรศัพท์"):h("กรุณากรอกเลข HN"):h("กรุณากรอกชื่อผู้ป่วย"),o=()=>{for(const i of s.destinations){if(!i.hospitalId)return h("กรุณาเลือกโรงพยาบาลปลายทางให้ครบ");for(const e of i.clinics)if(!e.clinicId)return h("กรุณาเลือกคลินิกให้ครบ")}return!0},N=()=>s.travelDate?!0:h("กรุณาเลือกวันที่ต้องการส่งตัว"),h=i=>(g.error(i),!1),G=()=>{p.value===1&&!r()||p.value===2&&!o()||p.value===3&&!N()||p.value<4&&p.value++},U=()=>{p.value>1&&p.value--},q=async()=>{if(!S.value){if(!r()||!o()||!N()){g.error("กรุณาแก้ไขข้อมูลในขั้นตอนก่อนหน้าให้ถูกต้อง");return}S.value=!0;try{const i={patientName:s.patientName,patientHN:s.patientHN,patientIdCard:s.patientIdCard,patientTel:s.patientTel,patientBirthdate:s.patientBirthdate,healthScheme:s.healthScheme,originHospitalId:s.originHospitalId,referralFiles:s.referralFiles,travelDate:s.travelDate,destinations:s.destinations.map(l=>({hospitalId:l.hospitalId,clinics:l.clinics.map(c=>({clinicId:c.clinicId}))}))},e=await Nt(i);m.value=e.trackingCode,g.success(`ส่งข้อมูลเรียบร้อยแล้ว! รหัสติดตาม: ${e.trackingCode}`)}catch(i){console.error("Submission error:",i),g.error("เกิดข้อผิดพลาดในการส่งข้อมูล กรุณาลองใหม่อีกครั้ง")}finally{S.value=!1}}};return(i,e)=>(a(),n("main",Ht,[t("div",Mt,[e[60]||(e[60]=t("header",{class:"mb-10 text-center"},[t("h1",{class:"text-3xl md:text-4xl font-extrabold text-gray-900 flex items-center justify-center gap-3"},[t("i",{class:"fas fa-exchange-alt text-teal-600"}),t("span",null,"แบบฟอร์มแจ้งการส่งตัวผู้ป่วย")]),t("p",{class:"text-gray-600 mt-2"},"กรุณากรอกข้อมูลให้ครบถ้วนเพื่อความสะดวกในการประสานงาน")],-1)),t("div",Tt,[(a(),n(k,null,C(4,l=>t("div",{key:l,class:"text-center w-1/4"},[t("div",{class:V(["mx-auto w-8 h-8 rounded-full flex items-center justify-center text-lg transition-colors duration-300",p.value===l?"bg-teal-600 text-white shadow-lg":p.value>l?"bg-green-500 text-white":"bg-gray-200 text-gray-500"])},[p.value>l?(a(),n("i",Vt)):(a(),n("span",$t,d(l),1))],2),t("p",{class:V(["text-xs mt-2 transition-colors duration-300",p.value>=l?"font-semibold text-gray-800":"text-gray-400"])},d(I[l-1]),3)])),64))]),t("div",Pt,[t("form",{onSubmit:Z(q,["prevent"])},[p.value===1?(a(),n("section",jt,[e[29]||(e[29]=t("h2",{class:"text-2xl font-bold text-gray-800 border-l-4 border-teal-500 pl-3"}," 1. ข้อมูลผู้ป่วยและต้นทาง ",-1)),t("div",Rt,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"ข้อมูลส่วนตัว",-1)),t("div",Ut,[t("div",null,[e[9]||(e[9]=t("label",{for:"patientName",class:"block text-sm font-medium text-gray-700"},[y("ชื่อ-นามสกุล "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Lt,[e[8]||(e[8]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"fas fa-user text-gray-400"})],-1)),_(t("input",{id:"patientName","onUpdate:modelValue":e[0]||(e[0]=l=>s.patientName=l),type:"text",placeholder:"เช่น นายสมชาย ใจดี",class:"block w-full rounded-md border-gray-300 pl-10 focus:border-teal-500 focus:ring-teal-500"},null,512),[[L,s.patientName]])])]),t("div",null,[e[11]||(e[11]=t("label",{for:"patientHN",class:"block text-sm font-medium text-gray-700"},[y("เลข HN (Hospital Number) "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Bt,[e[10]||(e[10]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"fas fa-hashtag text-gray-400"})],-1)),_(t("input",{id:"patientHN","onUpdate:modelValue":e[1]||(e[1]=l=>s.patientHN=l),type:"text",placeholder:"ระบุเลข HN",class:"block w-full rounded-md border-gray-300 pl-10 focus:border-teal-500 focus:ring-teal-500"},null,512),[[L,s.patientHN]])])])]),t("div",Wt,[t("div",null,[e[13]||(e[13]=t("label",{for:"patientIdCard",class:"block text-sm font-medium text-gray-700"},[y("เลขบัตรประจำตัวประชาชน "),t("span",{class:"text-red-500"},"*")],-1)),t("div",At,[e[12]||(e[12]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"fas fa-id-card text-gray-400"})],-1)),_(t("input",{id:"patientIdCard","onUpdate:modelValue":e[2]||(e[2]=l=>s.patientIdCard=l),type:"text",maxlength:"13",placeholder:"13 หลัก (ไม่ต้องมีขีด)",class:"block w-full rounded-md border-gray-300 pl-10 focus:border-teal-500 focus:ring-teal-500"},null,512),[[L,s.patientIdCard]])])]),t("div",null,[e[15]||(e[15]=t("label",{for:"patientTel",class:"block text-sm font-medium text-gray-700"},[y("เบอร์โทรศัพท์ที่ติดต่อได้ "),t("span",{class:"text-red-500"},"*")],-1)),t("div",Ot,[e[14]||(e[14]=t("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[t("i",{class:"fas fa-phone text-gray-400"})],-1)),_(t("input",{id:"patientTel","onUpdate:modelValue":e[3]||(e[3]=l=>s.patientTel=l),type:"tel",maxlength:"10",placeholder:"081xxxxxxx",class:"block w-full rounded-md border-gray-300 pl-10 focus:border-teal-500 focus:ring-teal-500"},null,512),[[L,s.patientTel]])])])])]),t("div",zt,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-2"},"ข้อมูลการส่งตัว",-1)),t("div",Et,[t("div",null,[e[18]||(e[18]=t("label",{for:"originHospital",class:"block text-sm font-medium text-gray-700"},[y("โรงพยาบาลต้นทาง "),t("span",{class:"text-red-500"},"*")],-1)),_(t("select",{id:"originHospital","onUpdate:modelValue":e[4]||(e[4]=l=>s.originHospitalId=l),class:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 focus:border-teal-500 focus:outline-none focus:ring-teal-500"},[e[17]||(e[17]=t("option",{disabled:"",value:""},"-- กรุณาเลือก --",-1)),(a(!0),n(k,null,C(F.value,l=>(a(),n("option",{key:l.id,value:l.id},d(l.name),9,Yt))),128))],512),[[$,s.originHospitalId]])]),t("div",null,[e[20]||(e[20]=t("label",{for:"healthScheme",class:"block text-sm font-medium text-gray-700"},[y("สิทธิการรักษา "),t("span",{class:"text-red-500"},"*")],-1)),_(t("select",{id:"healthScheme","onUpdate:modelValue":e[5]||(e[5]=l=>s.healthScheme=l),class:"mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 focus:border-teal-500 focus:outline-none focus:ring-teal-500"},e[19]||(e[19]=[st('<option disabled value="" data-v-c528bc89>-- กรุณาเลือก --</option><option value="บัตรทอง" data-v-c528bc89>สิทธิหลักประกันสุขภาพถ้วนหน้า (บัตรทอง)</option><option value="ประกันสังคม" data-v-c528bc89>สิทธิประกันสังคม</option><option value="ข้าราชการ" data-v-c528bc89>สิทธิสวัสดิการข้าราชการ</option><option value="ชำระเงินเอง" data-v-c528bc89>ชำระเงินเอง</option><option value="อื่นๆ" data-v-c528bc89>อื่นๆ</option>',6)]),512),[[$,s.healthScheme]])])])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"อัปโหลดเอกสารส่งตัว (สูงสุด 5 ไฟล์)",-1)),t("div",{class:"mt-1 flex justify-center rounded-lg border-2 border-dashed border-gray-300 px-6 pt-5 pb-6 hover:border-teal-400 hover:bg-teal-50 transition-all cursor-pointer",onClick:P},[t("div",Gt,[e[24]||(e[24]=t("i",{class:"fas fa-cloud-upload-alt mx-auto h-12 w-12 text-gray-400 mb-3"},null,-1)),t("div",qt,[t("label",Jt,[e[22]||(e[22]=t("span",null,"คลิกเพื่อเลือกไฟล์",-1)),t("input",{ref_key:"fileInput",ref:b,id:"referralFile",onChange:W,type:"file",class:"sr-only",multiple:"",accept:".pdf,.jpg,.jpeg,.png"},null,544)]),e[23]||(e[23]=t("p",{class:"pl-1"},"หรือลากไฟล์มาวาง",-1))]),e[25]||(e[25]=t("p",{class:"text-xs text-gray-500 mt-1"},"PDF, PNG, JPG ขนาดไม่เกิน 10MB",-1))])]),s.referralFiles.length>0?(a(),n("div",Kt,[(a(!0),n(k,null,C(s.referralFiles,(l,c)=>(a(),n("div",{key:c,class:"flex items-center justify-between bg-teal-50 p-2 px-3 rounded-md text-sm border border-teal-100"},[t("div",Qt,[e[26]||(e[26]=t("i",{class:"fas fa-file-alt text-teal-500 mr-2"},null,-1)),t("span",Xt,d(l.name),1)]),t("button",{onClick:Z(x=>A(c),["stop"]),type:"button",class:"text-red-400 hover:text-red-600 transition-colors p-1",title:"ลบไฟล์"},e[27]||(e[27]=[t("i",{class:"fas fa-times"},null,-1)]),8,Zt)]))),128))])):w("",!0)])])):w("",!0),p.value===2?(a(),n("section",te,[e[40]||(e[40]=t("h2",{class:"text-2xl font-bold text-gray-800 border-l-4 border-teal-500 pl-3"}," 2. โรงพยาบาลปลายทางและคลินิก ",-1)),(a(!0),n(k,null,C(s.destinations,(l,c)=>(a(),n("div",{key:c,class:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-all"},[t("div",ee,[t("h3",se,[t("span",le," #"+d(c+1),1),e[30]||(e[30]=t("span",null,"ข้อมูลปลายทาง",-1))]),s.destinations.length>1?(a(),n("button",{key:0,onClick:x=>z(c),type:"button",class:"text-gray-400 hover:text-red-600 transition-colors",title:"ลบรายการนี้"},e[31]||(e[31]=[t("i",{class:"fas fa-trash-alt"},null,-1)]),8,oe)):w("",!0)]),t("div",ne,[t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[y("โรงพยาบาลปลายทาง "),t("span",{class:"text-red-500"},"*")],-1)),_(t("select",{"onUpdate:modelValue":x=>l.hospitalId=x,onChange:x=>B(c),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[e[32]||(e[32]=t("option",{disabled:"",value:""},"-- เลือกโรงพยาบาล --",-1)),(a(!0),n(k,null,C(F.value,x=>(a(),n("option",{key:x.id,value:x.id},d(x.name),9,ie))),128))],40,ae),[[$,l.hospitalId]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[y("คลินิก / แผนก "),t("span",{class:"text-red-500"},"*")],-1)),l.hospitalId?(a(),n("div",de,[(a(!0),n(k,null,C(l.clinics,(x,H)=>(a(),n("div",{key:H,class:"flex items-center gap-2"},[_(t("select",{"onUpdate:modelValue":M=>x.clinicId=M,class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-teal-500 focus:ring-teal-500"},[e[35]||(e[35]=t("option",{disabled:"",value:""},"-- เลือกคลินิก --",-1)),(a(!0),n(k,null,C(l.availableClinics,M=>(a(),n("option",{key:M.id,value:M.id},d(M.name),9,ce))),128))],8,ue),[[$,x.clinicId]]),l.clinics.length>1?(a(),n("button",{key:0,onClick:M=>Y(c,H),type:"button",class:"text-gray-400 hover:text-red-500 p-2",title:"ลบคลินิก"},e[36]||(e[36]=[t("i",{class:"fas fa-minus-circle"},null,-1)]),8,pe)):w("",!0)]))),128)),t("button",{onClick:x=>E(c),type:"button",class:"text-sm text-teal-600 hover:text-teal-800 font-medium flex items-center gap-1 mt-2"},e[37]||(e[37]=[t("i",{class:"fas fa-plus"},null,-1),y(" เพิ่มแผนก/คลินิก ")]),8,me)])):(a(),n("div",re,e[34]||(e[34]=[t("i",{class:"fas fa-info-circle mr-1"},null,-1),y(" กรุณาเลือกโรงพยาบาลก่อน ")])))])])]))),128)),t("button",{onClick:O,type:"button",class:"w-full py-3 border-2 border-dashed border-teal-300 text-teal-600 rounded-lg hover:bg-teal-50 transition-colors font-semibold"},e[39]||(e[39]=[t("i",{class:"fas fa-plus-circle mr-2"},null,-1),y(" เพิ่มโรงพยาบาลปลายทางอื่น ")]))])):w("",!0),p.value===3?(a(),n("section",fe,[e[41]||(e[41]=t("h2",{class:"text-2xl font-bold text-gray-800 border-l-4 border-teal-500 pl-3"}," 3. เลือกวันและเวลาเดินทาง ",-1)),t("div",ge,[rt(Dt,{modelValue:s.travelDate,"onUpdate:modelValue":e[6]||(e[6]=l=>s.travelDate=l)},null,8,["modelValue"])]),e[42]||(e[42]=t("p",{class:"text-center text-sm text-gray-500"}," * กรุณาเลือกวันที่ผู้ป่วยสะดวก หรือวันที่คาดว่าจะเดินทางไปถึง ",-1))])):w("",!0),p.value===4?(a(),n("section",be,[m.value?(a(),n("div",ve,[e[44]||(e[44]=t("div",{class:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-100 mb-6"},[t("i",{class:"fas fa-check text-green-600 text-4xl"})],-1)),e[45]||(e[45]=t("h2",{class:"text-3xl font-bold text-gray-800 mb-2"},"ส่งข้อมูลสำเร็จ!",-1)),e[46]||(e[46]=t("p",{class:"text-gray-600 mb-8"},"ระบบได้รับข้อมูลการส่งตัวเรียบร้อยแล้ว",-1)),t("div",xe,[e[43]||(e[43]=t("p",{class:"text-sm text-gray-500 uppercase tracking-wide font-semibold mb-2"}," รหัสติดตามสถานะ ",-1)),t("p",ye,d(m.value),1)]),t("button",{onClick:e[7]||(e[7]=l=>dt(v).push("/")),type:"button",class:"px-8 py-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition shadow-md font-medium"}," กลับสู่หน้าหลัก ")])):(a(),n("div",he,[e[56]||(e[56]=t("h2",{class:"text-2xl font-bold text-gray-800 mb-6 border-l-4 border-teal-500 pl-3"}," 4. ตรวจสอบและยืนยันข้อมูล ",-1)),t("div",we,[t("div",ke,[e[53]||(e[53]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fas fa-user-circle text-teal-500"}),y(" ข้อมูลผู้ป่วย ")],-1)),t("dl",Ce,[t("div",null,[e[47]||(e[47]=t("dt",{class:"text-gray-500"},"ชื่อ-นามสกุล",-1)),t("dd",Se,d(s.patientName),1)]),t("div",null,[e[48]||(e[48]=t("dt",{class:"text-gray-500"},"HN",-1)),t("dd",De,d(s.patientHN),1)]),t("div",null,[e[49]||(e[49]=t("dt",{class:"text-gray-500"},"เลขบัตรประชาชน",-1)),t("dd",_e,d(s.patientIdCard),1)]),t("div",null,[e[50]||(e[50]=t("dt",{class:"text-gray-500"},"เบอร์โทรศัพท์",-1)),t("dd",Ie,d(s.patientTel),1)]),t("div",null,[e[51]||(e[51]=t("dt",{class:"text-gray-500"},"โรงพยาบาลต้นทาง",-1)),t("dd",Fe,d(R(s.originHospitalId)),1)]),t("div",null,[e[52]||(e[52]=t("dt",{class:"text-gray-500"},"สิทธิการรักษา",-1)),t("dd",Ne,d(s.healthScheme),1)])]),t("div",He,[t("dt",Me," เอกสารแนบ ("+d(s.referralFiles.length)+") ",1),s.referralFiles.length?(a(),n("ul",Te,[(a(!0),n(k,null,C(s.referralFiles,l=>(a(),n("li",{key:l.name},d(l.name),1))),128))])):(a(),n("span",Ve,"- ไม่มีเอกสารแนบ -"))])]),t("div",$e,[e[54]||(e[54]=t("h3",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2"},[t("i",{class:"fas fa-hospital-alt text-teal-500"}),y(" ปลายทางที่ต้องการส่งตัว ")],-1)),(a(!0),n(k,null,C(s.destinations,(l,c)=>(a(),n("div",{key:c,class:"mb-4 last:mb-0"},[t("p",Pe,d(c+1)+". "+d(R(l.hospitalId)),1),t("ul",je,[(a(!0),n(k,null,C(l.clinics,(x,H)=>(a(),n("li",{key:H},d(u(l.hospitalId,x.clinicId)),1))),128))])]))),128))]),t("div",Re,[e[55]||(e[55]=t("h3",{class:"text-lg font-bold text-gray-800 mb-2 flex items-center gap-2"},[t("i",{class:"fas fa-calendar-check text-teal-500"}),y(" วันที่เดินทาง ")],-1)),t("p",Ue,d(s.travelDate instanceof Date?s.travelDate.toLocaleDateString("th-TH",{dateStyle:"long"}):"ยังไม่ระบุ"),1)])]),e[57]||(e[57]=t("p",{class:"text-center text-sm text-gray-500 mb-6"},[t("i",{class:"fas fa-info-circle mr-1"}),y(" กรุณาตรวจสอบข้อมูลให้ถูกต้องก่อนยืนยัน ")],-1))]))])):w("",!0),m.value?w("",!0):(a(),n("div",Le,[p.value>1?(a(),n("button",{key:0,onClick:U,type:"button",class:"px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition"},e[58]||(e[58]=[t("i",{class:"fas fa-arrow-left mr-2"},null,-1),y(" ย้อนกลับ ")]))):(a(),n("div",Be)),p.value<4?(a(),n("button",{key:2,onClick:G,type:"button",class:"px-6 py-2.5 bg-teal-600 text-white rounded-lg font-medium hover:bg-teal-700 transition shadow-sm hover:shadow flex items-center"},e[59]||(e[59]=[y(" ถัดไป "),t("i",{class:"fas fa-arrow-right ml-2"},null,-1)]))):w("",!0),p.value===4?(a(),n("button",{key:3,type:"submit",disabled:S.value,class:"px-8 py-3 bg-green-600 text-white rounded-lg font-bold hover:bg-green-700 transition shadow-md hover:shadow-lg flex items-center disabled:opacity-70 disabled:cursor-not-allowed"},[S.value?(a(),n("i",Ae)):w("",!0),t("span",null,d(S.value?"กำลังส่งข้อมูล...":"ยืนยันการส่งข้อมูล"),1)],8,We)):w("",!0)]))],32)])])]))}}),Ee=lt(Oe,[["__scopeId","data-v-c528bc89"]]);export{Ee as default};
