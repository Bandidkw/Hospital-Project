import{d as x,u as y,r as m,o as p,c as o,a,b as e,e as i,w as v,f as g,v as b,k as w,t as h,_ as k}from"./index-C1nZs7mf.mjs";import{f as H,u as U}from"./historyService-CTCai6sq.mjs";const V={class:"p-6 bg-white rounded-xl shadow-2xl"},T={key:0,class:"text-center py-12"},_={class:"card bg-gray-50 p-6 rounded-xl shadow-lg border-t-4 border-orange-500"},D={class:"mt-4"},M={class:"card bg-gray-50 p-6 rounded-xl shadow-lg border-t-4 border-blue-500"},E={key:0,class:"mt-6"},L=["src"],S={class:"pt-4 flex justify-end"},B=["disabled"],C={key:0,class:"fas fa-spinner fa-spin mr-2"},N={key:1,class:"fas fa-check-circle mr-2"},q=x({__name:"DashboardHistoryEditView",setup(I){const n=y(),s=m({id:1,title:"",contentHtml:"",imageUrl:""}),u=m(!0),r=m(!1),c=async()=>{u.value=!0;try{const l=await H();s.value=l}catch(l){console.error("Failed to load history data:",l),n.error("ไม่สามารถโหลดข้อมูลประวัติโรงพยาบาลได้")}finally{u.value=!1}},f=async()=>{r.value=!0;try{await U(s.value),n.success("บันทึกประวัติโรงพยาบาลสำเร็จ!")}catch(l){console.error("Error saving history settings:",l),n.error("บันทึกประวัติล้มเหลว")}finally{r.value=!1}};return p(c),(l,t)=>(a(),o("div",V,[t[12]||(t[12]=e("h2",{class:"text-3xl font-extrabold text-gray-800 mb-2 flex items-center"},[e("i",{class:"fas fa-history mr-4 text-orange-600"}),i(" จัดการประวัติโรงพยาบาล ")],-1)),t[13]||(t[13]=e("p",{class:"text-gray-600 mb-6 border-b pb-4"}," แก้ไขเนื้อหาความเป็นมาและรูปภาพประวัติที่จะแสดงบนหน้าเว็บไซต์หลัก ",-1)),u.value?(a(),o("div",T,t[3]||(t[3]=[e("i",{class:"fas fa-spinner fa-spin text-6xl text-orange-500"},null,-1),e("p",{class:"mt-4 text-lg text-gray-600"},"กำลังโหลดข้อมูลประวัติ...",-1)]))):(a(),o("form",{key:1,onSubmit:v(f,["prevent"]),class:"space-y-8"},[e("div",_,[t[7]||(t[7]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fas fa-file-alt mr-2 text-orange-500"}),i(" เนื้อหาประวัติ ")],-1)),e("div",null,[t[4]||(t[4]=e("label",{for:"historyTitle",class:"block text-sm font-semibold text-gray-700"},"หัวข้อ:",-1)),g(e("input",{type:"text",id:"historyTitle","onUpdate:modelValue":t[0]||(t[0]=d=>s.value.title=d),required:"",class:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500",placeholder:"ประวัติโรงพยาบาลแม่แตง"},null,512),[[b,s.value.title]])]),e("div",D,[t[5]||(t[5]=e("label",{for:"contentHtml",class:"block text-sm font-semibold text-gray-700"},"เนื้อหา (รองรับ HTML):",-1)),g(e("textarea",{id:"contentHtml","onUpdate:modelValue":t[1]||(t[1]=d=>s.value.contentHtml=d),rows:"15",required:"",class:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 font-mono text-sm placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500"},null,512),[[b,s.value.contentHtml]]),t[6]||(t[6]=e("p",{class:"text-xs text-gray-500 mt-1"}," คุณสามารถใส่แท็ก HTML เช่น <p>, <br> เพื่อจัดรูปแบบเนื้อหาได้ ",-1))])]),e("div",M,[t[11]||(t[11]=e("h3",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fas fa-image mr-2 text-blue-500"}),i(" รูปภาพประกอบ ")],-1)),e("div",null,[t[8]||(t[8]=e("label",{for:"imageUrl",class:"block text-sm font-semibold text-gray-700"},"URL รูปภาพประวัติ:",-1)),g(e("input",{type:"url",id:"imageUrl","onUpdate:modelValue":t[2]||(t[2]=d=>s.value.imageUrl=d),class:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm p-3 placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500",placeholder:"http://yourcdn.com/path/to/image.png"},null,512),[[b,s.value.imageUrl]]),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 mt-1"},"เมื่อมีการอัปโหลดไฟล์จริง URL นี้จะถูกแทนที่",-1))]),s.value.imageUrl?(a(),o("div",E,[t[10]||(t[10]=e("p",{class:"text-sm font-semibold text-gray-700 mb-2"},"รูปภาพตัวอย่างปัจจุบัน:",-1)),e("img",{src:s.value.imageUrl,alt:"Current History Image",class:"max-w-xs h-auto rounded-lg shadow-md border border-gray-300"},null,8,L)])):w("",!0)]),e("div",S,[e("button",{type:"submit",disabled:r.value,class:"flex items-center bg-green-600 text-white px-8 py-3 rounded-xl hover:bg-green-700 transition duration-300 text-lg shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed"},[r.value?(a(),o("i",C)):(a(),o("i",N)),i(" "+h(r.value?"กำลังบันทึก...":"บันทึกการแก้ไข"),1)],8,B)])],32))]))}}),F=k(q,[["__scopeId","data-v-89b43511"]]);export{F as default};
