import{d as v,u as y,r as b,c as d,a as n,b as e,e as l,w,f as i,v as c,g as k,F as h,h as X,t as f,i as N}from"./index-C1nZs7mf.mjs";import{c as V}from"./complaintService-BxRLt6Wd.mjs";const I={class:"container mx-auto py-12 px-4 sm:px-6 lg:px-8"},j={class:"max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-2xl border-t-4 border-red-600"},C={class:"p-5 border border-gray-200 rounded-lg bg-gray-50 space-y-6"},F={class:"p-5 border border-gray-200 rounded-lg bg-gray-50 space-y-6"},D=["value"],S={class:"pt-4"},U=["disabled"],q={key:0,class:"fas fa-paper-plane mr-2"},B={key:1,class:"fas fa-spinner fa-spin mr-2"},A=v({__name:"ComplaintFormView",setup(M){const p=["พฤติกรรม/การบริการของบุคลากร","การรอคอย/ความล่าช้าในการรับบริการ","คุณภาพการรักษา/ความผิดพลาดทางการแพทย์","ความสะอาด/สุขอนามัยของสถานที่","สิ่งอำนวยความสะดวก/สภาพแวดล้อม","ปัญหาการเบิกจ่าย/ค่ารักษาพยาบาล","ระบบนัดหมาย/การสื่อสาร","อื่นๆ (โปรดระบุในรายละเอียด)"],u=y(),m={subject:"",description:"",fullName:"",contactInfo:"",status:"รอดำเนินการ"},s=b({...m}),r=b(!1),x=async()=>{if(!s.value.subject||!s.value.description||!s.value.contactInfo){u.error("กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน");return}r.value=!0;try{await V(s.value),u.success("ส่งข้อร้องเรียนสำเร็จ! ทางโรงพยาบาลจะดำเนินการตรวจสอบและติดต่อกลับ"),g()}catch(a){const t=N(a)?a.response?.data?.message||"การส่งข้อร้องเรียนล้มเหลว":"เกิดข้อผิดพลาดในการเชื่อมต่อ";u.error(t),console.error("Complaint submission failed:",a)}finally{r.value=!1}},g=()=>{s.value={...m}};return(a,t)=>(n(),d("div",I,[e("div",j,[t[11]||(t[11]=e("h1",{class:"text-3xl font-extrabold text-red-700 mb-2 flex items-center"},[e("i",{class:"fas fa-comment-dots mr-3 text-3xl"}),l(" ยื่นข้อร้องเรียน ")],-1)),t[12]||(t[12]=e("p",{class:"text-gray-600 mb-8 border-b pb-4"}," กรุณากรอกข้อมูลและรายละเอียดข้อร้องเรียนของท่าน ทางโรงพยาบาลจะดำเนินการตรวจสอบและติดต่อกลับโดยเร็วที่สุด ",-1)),e("form",{onSubmit:w(x,["prevent"]),class:"space-y-8"},[e("div",C,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold text-gray-800 flex items-center mb-4"},[e("i",{class:"fas fa-user-circle mr-2 text-red-500"}),l(" ข้อมูลผู้แจ้ง ")],-1)),e("div",null,[t[4]||(t[4]=e("label",{for:"fullName",class:"block text-sm font-semibold text-gray-700"},"ชื่อ-นามสกุล ผู้แจ้ง (ถ้าต้องการระบุ):",-1)),i(e("input",{type:"text",id:"fullName","onUpdate:modelValue":t[0]||(t[0]=o=>s.value.fullName=o),class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 placeholder-gray-400 focus:ring-red-500 focus:border-red-500 transition duration-150",placeholder:"เช่น นาย/นางสาว สมัคร ใจดี"},null,512),[[c,s.value.fullName]])]),e("div",null,[t[5]||(t[5]=e("label",{for:"contactInfo",class:"block text-sm font-semibold text-gray-700"},[l("ข้อมูลติดต่อ (เบอร์โทรศัพท์ หรือ อีเมล): "),e("span",{class:"text-red-600 font-bold"},"* จำเป็นต้องระบุ")],-1)),i(e("input",{type:"text",id:"contactInfo","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.contactInfo=o),class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 placeholder-gray-400 focus:ring-red-500 focus:border-red-500 transition duration-150",required:"",placeholder:"0XX-XXX-XXXX หรือ email@example.com"},null,512),[[c,s.value.contactInfo]])])]),e("div",F,[t[10]||(t[10]=e("h2",{class:"text-xl font-bold text-gray-800 flex items-center mb-4"},[e("i",{class:"fas fa-file-alt mr-2 text-red-500"}),l(" รายละเอียดการร้องเรียน ")],-1)),e("div",null,[t[8]||(t[8]=e("label",{for:"subject",class:"block text-sm font-semibold text-gray-700"},[l("หัวข้อเรื่องร้องเรียน: "),e("span",{class:"text-red-600 font-bold"},"*")],-1)),i(e("select",{id:"subject","onUpdate:modelValue":t[2]||(t[2]=o=>s.value.subject=o),class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 bg-white focus:ring-red-500 focus:border-red-500 transition duration-150",required:""},[t[7]||(t[7]=e("option",{value:"",disabled:"",selected:""},"--- กรุณาเลือกหัวข้อร้องเรียน ---",-1)),(n(),d(h,null,X(p,o=>e("option",{key:o,value:o},f(o),9,D)),64))],512),[[k,s.value.subject]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"description",class:"block text-sm font-semibold text-gray-700"},[l("รายละเอียดข้อร้องเรียน: "),e("span",{class:"text-red-600 font-bold"},"*")],-1)),i(e("textarea",{id:"description",rows:"6","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.description=o),class:"mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 placeholder-gray-400 focus:ring-red-500 focus:border-red-500 transition duration-150",required:"",placeholder:"กรุณาให้ข้อมูลเท่าที่จำได้ เช่น วันที่/เวลาเกิดเหตุ, สถานที่, ชื่อเจ้าหน้าที่ (ถ้าทราบ) เพื่อให้ง่ายต่อการตรวจสอบ"},null,512),[[c,s.value.description]])])]),e("div",S,[e("button",{type:"submit",disabled:r.value,class:"w-full bg-red-600 text-white font-bold text-lg py-4 rounded-lg hover:bg-red-700 transition duration-300 disabled:bg-gray-400 disabled:cursor-not-allowed shadow-md hover:shadow-lg"},[r.value?(n(),d("i",B)):(n(),d("i",q)),l(" "+f(r.value?"กำลังส่งข้อร้องเรียน...":"ส่งข้อร้องเรียน"),1)],8,U)])],32)])]))}});export{A as default};
