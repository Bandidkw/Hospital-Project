import{d as N,y as S,u as $,r as b,l as T,o as D,J as V,c as r,a as d,b as e,m as h,e as c,k as M,n as u,t as n,D as y,F as B,h as F,w as m,Y as j,Z as E,$ as L}from"./index-C1nZs7mf.mjs";const q={class:"p-6 bg-white rounded-xl shadow-2xl transition duration-500"},z={class:"flex justify-between items-center mb-6"},J={class:"text-gray-600"},R={key:0,class:"ml-2"},W={key:0,class:"text-center py-12"},Y={key:1,class:"text-center py-12"},Z={key:2,class:"space-y-4"},G=["onClick"],H={class:"flex justify-between items-start"},I={class:"flex-1"},K={class:"flex items-center gap-3 mb-3"},O={class:"bg-purple-100 text-purple-800 text-sm font-semibold px-3 py-1 rounded"},P={class:"text-xl font-bold text-gray-800"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},U={class:"flex items-center text-gray-600"},X={class:"flex items-center text-gray-600"},tt={class:"flex items-center text-gray-600"},et={class:"flex items-center text-gray-600"},st={class:"flex gap-2 ml-4"},lt=["onClick","title"],ot=["onClick"],it=["onClick"],rt=N({__name:"DashboardWebsiteSettingsListView",setup(nt){const _=S(),a=$(),f=b(!0),o=b([]),v=T(()=>o.value.filter(l=>l.isActive).length),p=async()=>{f.value=!0;try{const l=await j();o.value=l}catch(l){a.error("ไม่สามารถโหลดข้อมูลได้"),console.error("Fetch all settings failed:",l)}finally{f.value=!1}},w=l=>{a.info(`ดูรายละเอียด: ${l.hospitalNameTh}`)},k=async l=>{const t=o.value.find(i=>i.id===l);if(t&&!t.isActive){if(o.value.filter(g=>g.isActive).length>=1){a.warning("สามารถเปิดใช้งานได้เพียง 1 การตั้งค่าเท่านั้น กรุณาปิดการตั้งค่าอื่นก่อน");return}if(!confirm(`คุณต้องการเปิดใช้งานการตั้งค่า "${t.hospitalNameTh}" หรือไม่?

การตั้งค่านี้จะถูกใช้แสดงผลบนเว็บไซต์`))return}if(!(t&&t.isActive&&!confirm(`คุณต้องการปิดใช้งานการตั้งค่า "${t.hospitalNameTh}" หรือไม่?

เว็บไซต์จะไม่แสดงข้อมูลการตั้งค่านี้`)))try{await E(l),a.success("เปลี่ยนสถานะการใช้งานสำเร็จ"),await p()}catch(i){a.error("ไม่สามารถเปลี่ยนสถานะได้"),console.error("Toggle settings failed:",i)}},C=l=>{_.push({path:"/dashboard/website-settings",query:{id:l.id}})},A=async l=>{const t=o.value.find(s=>s.id===l);if(t?.isActive){a.error("ไม่สามารถลบการตั้งค่าที่กำลังใช้งานอยู่ได้ กรุณาปิดการใช้งานก่อน");return}if(confirm(`คุณต้องการลบการตั้งค่า "${t?.hospitalNameTh}" หรือไม่?

การดำเนินการนี้ไม่สามารถย้อนกลับได้`))try{await L(l),a.success("ลบการตั้งค่าสำเร็จ"),await p()}catch(s){a.error("ไม่สามารถลบการตั้งค่าได้"),console.error("Delete settings failed:",s)}};return D(p),(l,t)=>{const i=V("router-link");return d(),r("div",q,[e("div",z,[e("div",null,[t[2]||(t[2]=e("h2",{class:"text-3xl font-extrabold text-gray-800 mb-2 flex items-center"},[e("i",{class:"fas fa-list mr-4 text-purple-600"}),c(" รายการตั้งค่าเว็บไซต์ ")],-1)),e("p",J,[t[1]||(t[1]=c(" ดูและจัดการข้อมูลการตั้งค่าเว็บไซต์ทั้งหมด ")),o.value.length>0?(d(),r("span",R,[t[0]||(t[0]=c(" (เปิดใช้งาน: ")),e("span",{class:u(v.value===1?"text-green-600 font-semibold":"text-red-600 font-semibold")},n(v.value),3),c(" / "+n(o.value.length)+") ",1)])):M("",!0)])]),h(i,{to:"/dashboard/website-settings",class:"flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-md"},{default:y(()=>t[3]||(t[3]=[e("i",{class:"fas fa-plus mr-2"},null,-1),c(" สร้างการตั้งค่าใหม่ ")])),_:1,__:[3]})]),f.value?(d(),r("div",W,t[4]||(t[4]=[e("i",{class:"fas fa-spinner fa-spin text-6xl text-purple-500"},null,-1),e("p",{class:"mt-4 text-lg text-gray-600"},"กำลังโหลดข้อมูล...",-1)]))):o.value.length===0?(d(),r("div",Y,[t[6]||(t[6]=e("i",{class:"fas fa-inbox text-6xl text-gray-300 mb-4"},null,-1)),t[7]||(t[7]=e("p",{class:"text-xl text-gray-500"},"ยังไม่มีข้อมูลการตั้งค่า",-1)),h(i,{to:"/dashboard/website-settings",class:"inline-flex items-center mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition"},{default:y(()=>t[5]||(t[5]=[e("i",{class:"fas fa-plus mr-2"},null,-1),c(" สร้างการตั้งค่าแรก ")])),_:1,__:[5]})])):(d(),r("div",Z,[(d(!0),r(B,null,F(o.value,(s,g)=>(d(),r("div",{key:s.id,class:"bg-gray-50 p-6 rounded-lg border hover:shadow-lg transition cursor-pointer",onClick:x=>w(s)},[e("div",H,[e("div",I,[e("div",K,[e("span",O," #"+n(g+1),1),e("h3",P,n(s.hospitalNameTh),1),e("span",{class:u(["text-xs font-semibold px-2 py-1 rounded",s.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"])},n(s.isActive?"เปิดใช้งาน":"ปิดใช้งาน"),3)]),e("div",Q,[e("div",U,[t[8]||(t[8]=e("i",{class:"fas fa-hospital-alt w-5 mr-2 text-blue-500"},null,-1)),e("span",null,n(s.hospitalNameEn),1)]),e("div",X,[t[9]||(t[9]=e("i",{class:"fas fa-map-marker-alt w-5 mr-2 text-red-500"},null,-1)),e("span",null,n(s.province),1)]),e("div",tt,[t[10]||(t[10]=e("i",{class:"fas fa-phone w-5 mr-2 text-green-500"},null,-1)),e("span",null,n(s.telMain),1)]),e("div",et,[t[11]||(t[11]=e("i",{class:"fas fa-envelope w-5 mr-2 text-yellow-500"},null,-1)),e("span",null,n(s.emailMain),1)])])]),e("div",st,[e("button",{onClick:m(x=>k(s.id),["stop"]),class:u(["text-white px-4 py-2 rounded transition",s.isActive?"bg-green-500 hover:bg-green-600":"bg-gray-400 hover:bg-gray-500"]),title:s.isActive?"ปิดการใช้งาน":"เปิดการใช้งาน"},[e("i",{class:u(s.isActive?"fas fa-toggle-on":"fas fa-toggle-off")},null,2)],10,lt),e("button",{onClick:m(x=>C(s),["stop"]),class:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition",title:"แก้ไข"},t[12]||(t[12]=[e("i",{class:"fas fa-edit"},null,-1)]),8,ot),e("button",{onClick:m(x=>A(s.id),["stop"]),class:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition",title:"ลบ"},t[13]||(t[13]=[e("i",{class:"fas fa-trash"},null,-1)]),8,it)])])],8,G))),128))]))])}}});export{rt as default};
