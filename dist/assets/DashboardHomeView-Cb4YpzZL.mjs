import{x as w,d as D,K as _,u as T,y as E,r as n,o as j,c as a,a as i,b as e,k as f,e as l,t as v,A as d}from"./index-C1nZs7mf.mjs";const I={async getDashboardStats(){let u=0;try{const s=await w.get("/dashboard/news");s.data&&s.data.data&&(u=s.data.data.length)}catch(s){console.error("Error fetching news count, setting to 0:",s),u=0}let r=0;try{r=(await w.get("/dashboard/ita")).totalCount??0}catch(s){console.error("Error fetching ITA document count, setting to 0:",s),r=0}return{newsCount:u,itaDocumentCount:r,userCount:12,personnelCount:230}}},R={class:"p-6 bg-white rounded-lg shadow-md"},V={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},$={class:"bg-white p-6 rounded-xl shadow-lg border-l-4 border-blue-500 flex flex-col justify-between transform transition-transform duration-300 hover:-translate-y-2"},B={class:"flex justify-between items-start"},N={class:"text-4xl font-bold text-gray-800 mt-2"},O={class:"bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500 flex flex-col justify-between transform transition-transform duration-300 hover:-translate-y-2"},U={class:"flex justify-between items-start"},F={class:"text-4xl font-bold text-gray-800 mt-2"},L={key:0,class:"card bg-gray-50 p-6 rounded-lg shadow-inner mb-8"},P={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},q={key:1,class:"card bg-gray-50 p-6 rounded-lg shadow-inner mb-8"},K=D({__name:"DashboardHomeView",setup(u){const r=_(),s=T(),c=E(),b=n(0),p=n(0),y=n(0),h=n(0),A=n([]),x=n(!0),S=[{id:1,user_name:"SuperAdmin",action_type:"CREATE",target_type:"ข่าวสาร",target_name:"ประกาศวันหยุดราชการ",createdAt:new Date(Date.now()-5*60*1e3).toISOString()},{id:2,user_name:"Admin",action_type:"UPDATE",target_type:"เอกสาร ITA",target_name:"รายงานผลการดำเนินงาน 2567",createdAt:new Date(Date.now()-60*60*1e3).toISOString()},{id:3,user_name:"SuperAdmin",action_type:"DELETE",target_type:"ผู้ใช้งาน",target_name:"user_test",createdAt:new Date(Date.now()-24*60*60*1e3).toISOString()}],C=async()=>{try{const o=await I.getDashboardStats();b.value=o.newsCount,p.value=o.itaDocumentCount,y.value=o.userCount,h.value=o.personnelCount}catch(o){console.error("Failed to fetch summary data:",o),s.error("ไม่สามารถโหลดข้อมูลสรุปได้")}},k=async()=>{x.value=!0;try{await new Promise(o=>setTimeout(o,500)),A.value=S}catch(o){console.error("Failed to fetch recent activities:",o),s.error("ไม่สามารถโหลดข้อมูลกิจกรรมล่าสุดได้")}finally{x.value=!1}},m=o=>{switch(o){case"add_news":r.isSuperAdmin?c.push({name:"dashboard-news"}):s.error("คุณไม่มีสิทธิ์เข้าถึงส่วนนี้!");break;case"upload_ita":r.isAdmin||r.isSuperAdmin?c.push({name:"dashboard-ita"}):s.error("คุณไม่มีสิทธิ์เข้าถึงส่วนนี้!");break;case"view_reports":r.isSuperAdmin?c.push({name:"dashboard-statistics"}):s.error("คุณไม่มีสิทธิ์เข้าถึงส่วนนี้!");break;case"view_my_docs":r.isUser?s.warning("หน้านี้ยังอยู่ในระหว่างการพัฒนา"):s.error("คุณไม่มีสิทธิ์เข้าถึงส่วนนี้!");break;default:s.error("การดำเนินการไม่ถูกต้อง!");break}};return j(()=>{C(),k()}),(o,t)=>(i(),a("div",R,[t[17]||(t[17]=e("h2",{class:"text-2xl font-bold text-gray-800 mb-4 flex items-center"},[e("i",{class:"fas fa-tachometer-alt mr-3 text-blue-500"}),l(" แดชบอร์ดหลัก ")],-1)),t[18]||(t[18]=e("p",{class:"text-gray-700 mb-6"}," ยินดีต้อนรับสู่ระบบจัดการเว็บไซต์โรงพยาบาลแม่แตง. นี่คือภาพรวมของข้อมูลสำคัญ. ",-1)),e("div",V,[e("div",$,[e("div",B,[e("div",null,[t[4]||(t[4]=e("p",{class:"text-gray-500 font-semibold"},"ข่าวสารทั้งหมด",-1)),e("p",N,v(b.value),1)]),t[5]||(t[5]=e("div",{class:"bg-blue-100 text-blue-600 p-3 rounded-full"},[e("i",{class:"fas fa-newspaper text-2xl"})],-1))]),t[6]||(t[6]=e("a",{href:"#",class:"text-blue-500 hover:underline text-sm mt-4"},"จัดการข่าวสาร →",-1))]),e("div",O,[e("div",U,[e("div",null,[t[7]||(t[7]=e("p",{class:"text-gray-500 font-semibold"},"เอกสาร ITA",-1)),e("p",F,v(p.value),1)]),t[8]||(t[8]=e("div",{class:"bg-green-100 text-green-600 p-3 rounded-full"},[e("i",{class:"fas fa-file-alt text-2xl"})],-1))]),t[9]||(t[9]=e("a",{href:"/dashboard/ita",class:"text-green-500 hover:underline text-sm mt-4"},"จัดการ ITA →",-1))])]),d(r).isAdmin||d(r).isSuperAdmin?(i(),a("div",L,[t[13]||(t[13]=e("h3",{class:"text-xl font-semibold text-gray-800 mb-4"},"การดำเนินการด่วน",-1)),e("div",P,[d(r).isSuperAdmin?(i(),a("button",{key:0,onClick:t[0]||(t[0]=g=>m("add_news")),class:"bg-indigo-500 text-white p-4 rounded-lg shadow hover:bg-indigo-600 transition duration-300 flex items-center justify-center"},t[10]||(t[10]=[e("i",{class:"fas fa-plus-circle mr-2"},null,-1),l(" เพิ่มข่าวสารใหม่ ")]))):f("",!0),e("button",{onClick:t[1]||(t[1]=g=>m("upload_ita")),class:"bg-teal-500 text-white p-4 rounded-lg shadow hover:bg-teal-600 transition duration-300 flex items-center justify-center"},t[11]||(t[11]=[e("i",{class:"fas fa-upload mr-2"},null,-1),l(" อัปโหลดเอกสาร ITA ")])),d(r).isSuperAdmin?(i(),a("button",{key:1,onClick:t[2]||(t[2]=g=>m("view_reports")),class:"bg-orange-500 text-white p-4 rounded-lg shadow hover:bg-orange-600 transition duration-300 flex items-center justify-center"},t[12]||(t[12]=[e("i",{class:"fas fa-chart-pie mr-2"},null,-1),l(" ดูรายงานสถิติ ")]))):f("",!0)])])):d(r).isUser?(i(),a("div",q,[t[15]||(t[15]=e("h3",{class:"text-xl font-semibold text-gray-800 mb-4"},"เข้าถึงส่วนที่ได้รับอนุญาต",-1)),t[16]||(t[16]=e("p",{class:"text-gray-700"},"คุณมีสิทธิ์เข้าถึงข้อมูลเบื้องต้นของระบบ",-1)),e("button",{onClick:t[3]||(t[3]=g=>m("view_my_docs")),class:"bg-green-500 text-white p-4 rounded-lg shadow hover:bg-green-600 transition duration-300 flex items-center justify-center mt-4"},t[14]||(t[14]=[e("i",{class:"fas fa-folder-open mr-2"},null,-1),l(" ดูเอกสารส่วนตัว ")]))])):f("",!0)]))}});export{K as default};
