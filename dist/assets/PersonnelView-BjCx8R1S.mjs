import{g as $}from"./personnelService-CKgtRLDa.mjs";import{d as C,c as s,a as t,n as c,b as n,k as b,t as d,r as m,l as _,o as B,m as L,F as k,h as w,p as D,_ as I}from"./index-C1nZs7mf.mjs";const V=["src","alt"],N={key:1,class:"text-xs text-gray-500 mt-2"},P="https://placehold.co/100x100/cccccc/ffffff?text=No+Photo",f=C({__name:"PersonnelCard",props:{personnel:{},isDirector:{type:Boolean,default:!1}},setup(x){const a=x;function p(e){if(!e)return"";if(/^https?:\/\//i.test(e))return e;const y="https://api.maetaeng.go.th/api/v1".replace(/\/+$/,"").replace(/\/api(\/v\d+)?$/i,""),r=String(e).replace(/^\/+/,"");return`${y}/${r}`}function i(e){console.error(`Image load failed for: ${a.personnel.name}`),e.target.src=P}return(e,u)=>(t(),s("div",{class:c(["bg-white p-4 rounded-xl shadow-md flex flex-col items-center text-center transition-transform hover:shadow-lg",{"p-6 shadow-xl ring-2 ring-blue-500 bg-blue-50":e.isDirector}])},[n("img",{src:p(e.personnel.imageUrl)||P,alt:e.personnel.name,class:c(["rounded-full object-cover mb-4 border-4 border-gray-100",e.isDirector?"w-32 h-32":"w-24 h-24"]),onError:i},null,42,V),n("h3",{class:c(["font-semibold text-gray-800 leading-tight",e.isDirector?"text-xl":"text-md"])},d(e.personnel.name),3),n("p",{class:c(["text-gray-700 mt-1",e.isDirector?"text-md":"text-sm"])},d(e.personnel.position),3),e.personnel.specialty?(t(),s("p",{key:0,class:c(["font-medium",e.isDirector?"text-blue-600 mt-1":"text-gray-500 text-xs"])},d(e.personnel.specialty),3)):b("",!0),e.personnel.tel&&e.personnel.tel!=="xxx"?(t(),s("p",N," โทร : 053-104148-51 ต่อ "+d(e.personnel.tel),1)):b("",!0)],2))}}),j={class:"container mx-auto p-8 bg-white my-8 rounded-xl shadow-lg"},E={key:0,class:"text-center py-10 text-gray-500"},F={key:1,class:"text-center py-10 text-red-600"},A={class:"mt-4 text-lg"},M={key:2},S={key:0,class:"flex justify-center mb-12"},z={key:1,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-12 justify-center"},U={key:2,class:"text-center py-5 text-gray-500 mb-8"},q={key:3,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6"},G={key:4,class:"text-center py-5 text-gray-500 mb-8"},H={key:3,class:"text-center py-10 text-gray-500"},J=C({__name:"PersonnelView",setup(x){const a=m([]),p=m(!0),i=m(null),e=_(()=>a.value.filter(r=>r.isDirector).sort((r,o)=>{const l=r.position.toLowerCase(),g=o.position.toLowerCase(),h=l.includes("ผู้อำนวยการ")||l.includes("director"),v=g.includes("ผู้อำนวยการ")||g.includes("director");return h&&!v?-1:!h&&v?1:l.localeCompare(g)})),u=_(()=>a.value.filter(r=>!r.isDirector).sort((r,o)=>r.position.localeCompare(o.position)));return B(async()=>{try{const r=await $();a.value=r}catch(r){i.value="ไม่สามารถโหลดข้อมูลบุคลากรได้",console.error("Fetch personnel failed:",r)}finally{p.value=!1}}),(r,o)=>(t(),s("div",j,[o[3]||(o[3]=n("h1",{class:"text-4xl font-extrabold text-teal-800 mb-2"},"คณะผู้บริหารโรงพยาบาลแม่แตง",-1)),o[4]||(o[4]=n("p",{class:"text-gray-700 leading-relaxed mb-8 border-b pb-4"}," โรงพยาบาลแม่แตงภาคภูมิใจในทีมบุคลากรทางการแพทย์และเจ้าหน้าที่ผู้เชี่ยวชาญ ซึ่งเป็นหัวใจสำคัญในการให้บริการดูแลสุขภาพแก่ประชาชนทุกคน... ",-1)),p.value?(t(),s("div",E,o[0]||(o[0]=[n("i",{class:"fas fa-spinner fa-spin text-4xl"},null,-1),n("p",{class:"mt-4 text-lg"},"กำลังโหลดข้อมูลบุคลากร...",-1)]))):i.value?(t(),s("div",F,[o[1]||(o[1]=n("i",{class:"fas fa-exclamation-triangle text-4xl"},null,-1)),n("p",A,"เกิดข้อผิดพลาดในการโหลดข้อมูล: "+d(i.value),1)])):a.value.length>0?(t(),s("div",M,[e.value.length===1?(t(),s("div",S,[L(f,{personnel:e.value[0],"is-director":!0,class:"w-full sm:w-1/2 md:w-1/3"},null,8,["personnel"])])):e.value.length>1?(t(),s("div",z,[(t(!0),s(k,null,w(e.value,l=>(t(),D(f,{key:l.id,personnel:l,"is-director":!0},null,8,["personnel"]))),128))])):(t(),s("div",U,"ไม่พบข้อมูลคณะผู้บริหาร")),u.value.length>0?(t(),s("div",q,[(t(!0),s(k,null,w(u.value,l=>(t(),D(f,{key:l.id,personnel:l},null,8,["personnel"]))),128))])):(t(),s("div",G,"ไม่พบข้อมูลหัวหน้ากลุ่มงานในระบบ"))])):(t(),s("div",H,o[2]||(o[2]=[n("p",null,"ไม่พบข้อมูลหัวหน้ากลุ่มงานในระบบ",-1)])))]))}}),Q=I(J,[["__scopeId","data-v-49b84180"]]);export{Q as default};
