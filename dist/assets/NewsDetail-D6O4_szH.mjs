import{d as p,B as y,r as d,o as h,I as _,H as w,J as k,c as o,a as n,b as a,j as D,t as u,k as I,m as N,D as C,e as g,_ as U}from"./index-C1nZs7mf.mjs";const B={class:"min-h-screen bg-white py-12 md:py-20 font-sarabun"},T={class:"container mx-auto px-4 max-w-4xl"},V={key:0},j={key:1,class:"text-center py-20"},E={class:"text-gray-600"},H={key:2,class:"text-center py-20"},L={key:3,class:"space-y-8"},M={class:"pt-8 border-t border-gray-100"},R={class:"pb-6 border-b border-gray-200"},S={class:"text-3xl md:text-4xl font-extrabold text-gray-900 leading-tight mb-2"},z={class:"text-sm text-gray-500 flex items-center gap-2"},A={key:0,class:"relative aspect-video rounded-xl overflow-hidden shadow-lg"},J=["src","alt"],P=["innerHTML"],$=p({__name:"NewsDetail",setup(q){const m=y(),s=d(null),r=d(!0),l=d(null),c=d(m.params.id);function f(t){return t?/\.(jpg|jpeg|png|gif|webp|svg)$/i.test(t):!1}function x(t){const e=t.target;console.error("[NewsDetail] Image failed to load:",e.src);const i="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="600" height="400"><rect width="100%" height="100%" fill="#e5e7eb"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="sans-serif" font-size="18" fill="#4b5563">ไม่สามารถโหลดภาพได้</text></svg>');e&&e.src!==i&&(e.src=i)}function b(t){try{return new Date(t).toLocaleDateString("th-TH",{day:"numeric",month:"long",year:"numeric"})}catch{return t}}h(()=>{window.scrollTo(0,0),c.value?v():(r.value=!1,l.value="ไม่พบ ID ข่าวสารใน URL")});async function v(){if(r.value=!0,l.value=null,s.value=null,!c.value){r.value=!1;return}try{const t=await _(c.value);!t||!t.title?l.value="ไม่พบข่าวสารที่ระบุ":s.value=t}catch(t){l.value=w(t)?t.response?.data?.message??t.message:"ไม่สามารถโหลดรายละเอียดข่าวสารได้"}finally{r.value=!1}}return(t,e)=>{const i=k("router-link");return n(),o("div",B,[a("div",T,[r.value?(n(),o("div",V,e[0]||(e[0]=[D('<div class="animate-pulse" data-v-1c605c8e><div class="h-10 bg-gray-200 rounded w-3/4 mb-4" data-v-1c605c8e></div><div class="h-4 bg-gray-200 rounded w-1/4 mb-10" data-v-1c605c8e></div><div class="h-64 bg-gray-200 rounded mb-12" data-v-1c605c8e></div><div class="space-y-4" data-v-1c605c8e><div class="h-4 bg-gray-200 rounded" data-v-1c605c8e></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-1c605c8e></div><div class="h-4 bg-gray-200 rounded" data-v-1c605c8e></div><div class="h-4 bg-gray-200 rounded w-4/5" data-v-1c605c8e></div></div></div>',1)]))):l.value?(n(),o("div",j,[e[1]||(e[1]=a("i",{class:"fas fa-exclamation-triangle text-red-500 text-4xl mb-4"},null,-1)),e[2]||(e[2]=a("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"เกิดข้อผิดพลาดในการโหลดข้อมูล",-1)),a("p",E,u(l.value),1),a("button",{onClick:v,class:"mt-6 text-blue-600 hover:text-blue-800 font-medium"}," ลองโหลดใหม่ ")])):s.value?(n(),o("div",L,[a("div",M,[N(i,{to:{name:"public-news"},class:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 font-semibold"},{default:C(()=>e[4]||(e[4]=[a("i",{class:"fas fa-arrow-left"},null,-1),g(" กลับสู่หน้าข่าวสารทั้งหมด ")])),_:1,__:[4]})]),a("header",R,[a("h1",S,u(s.value.title),1),a("p",z,[e[5]||(e[5]=a("i",{class:"far fa-calendar-alt"},null,-1)),g(" เผยแพร่เมื่อ: "+u(b(s.value.date)),1)])]),s.value.imageUrl&&f(s.value.imageUrl)?(n(),o("div",A,[a("img",{src:s.value.imageUrl,alt:s.value.title,class:"w-full h-full object-cover",onError:x},null,40,J)])):I("",!0),a("div",{class:"prose max-w-none text-gray-800 leading-relaxed",innerHTML:s.value.content},null,8,P)])):(n(),o("div",H,e[3]||(e[3]=[a("i",{class:"fas fa-info-circle text-gray-500 text-4xl mb-4"},null,-1),a("h2",{class:"text-2xl font-bold text-gray-800 mb-2"},"ไม่พบข้อมูลข่าวสารนี้",-1),a("p",{class:"text-gray-600"},"กรุณาตรวจสอบลิงก์อีกครั้ง",-1)])))])])}}}),G=U($,[["__scopeId","data-v-1c605c8e"]]);export{G as default};
